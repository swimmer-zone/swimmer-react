<!doctype html>
<html>
    <head>
        <title>Whisky Notes</title>
        <link href="https://cdn.jsdelivr.net/npm/select2@4.1.0-rc.0/dist/css/select2.min.css" rel="stylesheet" />
        <link href="https://cdnjs.cloudflare.com/ajax/libs/jquery-toggles/2.0.4/toggles.min.css" rel="stylesheet" />
        <script src="https://code.jquery.com/jquery-3.6.3.slim.min.js" integrity="sha256-ZwqZIVdD3iXNyGHbSYdsmWP//UBokj2FHAxKuSBKDSo=" crossorigin="anonymous"></script>
        <script src="https://cdn.jsdelivr.net/npm/select2@4.1.0-rc.0/dist/js/select2.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-toggles/2.0.4/toggles.min.js"></script>
        <script>
            $(document).ready(function() {
                let date = new Date();

                let day = date.getDate();
                let month = date.getMonth() + 1;
                let year = date.getFullYear();

                if (month < 10) month = "0" + month;
                if (day < 10) day = "0" + day;

                $("select").select2();
                $("[type=checkbox]").toggles();

                $("[name=date_of_tasting]").val(year + "-" + month + "-" + day);

                $("#region_select").hide();
                $("[name=brand]").change(function() {
                    $("[name=brand]").val($(this).val());
                });
                $("[name=country]").change(function() {
                    if ($(this).val() == 'Scotland') {
                        $("#region_select").show();
                        $("[name=region_select]").change(function() {
                            $("[name=region]").val($(this).val());
                        });
                    } else {
                        switch ($(this).val()) {
                            case 'The Netherlands':
                                $("[name=region]").val('netherlands');
                                break;
                            case 'United States':
                                $("[name=region]").val('usa');
                                break;
                            default:
                                $("[name=region]").val($(this).val().toLowerCase());
                                break;
                        }

                        $("#region_select").hide();
                    }
                });
                $("#generate").click(function(e) {
                    e.preventDefault();

                    let json_string = $(".json_input").text()
                        .replace("BRAND", $("[name=brand]").val())
                        .replace("DATE_OF_TASTING", $("[name=date_of_tasting]").val())
                        .replace("COUNTRY", $("[name=country]").val())
                        .replace("REGION", $("[name=region]").val())
                        .replace("NEAREST_TOWN", $("[name=nearest_town]").val())
                        .replace("CASK_STRENGTH", $("[name=cask_strength]").is(":checked"))
                        .replace("AGE", $("[name=age]").val())
                        .replace("STRENGTH", $("[name=strength]").val())
                        .replace("PRICE", $("[name=price]").val())
                        .replace("VOLUME", $("[name=volume]").val())
                        .replace("URL", $("[name=url]").val())
                        .replace("NOTES", $("[name=notes]").val())
                        .replace("FLAVOUR", $("[name=flavour]").val())
                        .replace("GLANCE", $("[name=glance]").val())
                        .replace("COLOR", $("[name=color]").val())
                        .replace("FINISH", $("[name=finish]").val())
                        .replace("RATING", $("[name=rating]").val())
                        .replace("WOULD_BUY", $("[name=would_buy]").is(":checked"));

                    $(".json_output").text(json_string);

                    let $temp = $("<input>");
                    $("body").append($temp);
                    $temp.val($('.json_output').text()).select();
                    document.execCommand("copy");
                    $temp.remove();
                });
            });
        </script>
        <style type="text/css">
            @import url('https://fonts.googleapis.com/css2?family=Indie+Flower&display=swap');

            * {
                font-family: "Indie Flower", "Open Sans", "Helvetica Neue", "Arial", "Helvetica", sans-serif;
                font-size: 24px;
                box-sizing: border-box;
            }
            body {
                background-color: #6c6eec22;
            }
            fieldset,
            .json_output {
                margin: 20px auto;
                max-width: 800px;
                border: 1px solid #6c6eec;
                background: #fff;
            }
            .json_input {
                display: none;
            }
            .json_output {
                background-color: #dddddd;
                min-height: 200px;
                font-family: monospace;
                color: #4a4b50;
                white-space: pre;
            }
            label {
                margin: 20px 10px 10px 10px;
                display: block;
            }
            label > span {
                display: block;
            }
            label select,
            label .select2,
            label input:not([type=checkbox]),
            label textarea {
                width: calc(100% - 40px);
                margin: 2px 4px;
                padding: 8px;
                border: 1px solid #5c5edc;
            }
            label .select2 * {
                border: none;
            }
            button {
                background-color: #6c6eec;
                color: #ffffff;
                padding: 8px;
                border: none;
                margin: 10px auto;
                max-width: 800px;
                display: inline-block;
            }
            input[type=checkbox],
            input[type=checkbox] + span {
                display: inline-block;
            }
        </style>
    </head>
    <body>
        <form>
            <h2>General</h2>
            <label>
                <span>Brand</span>
                <input type="text" name="brand">
            </label>
            <label>
                <span>Date of Tasting</span>
                <input type="date" name="date_of_tasting">
            </label>
            <label>
                <span>Country</span>
                <select name="country">
                    <option>-- Select --</option>
                    <option value="Canada">Canada</option>
                    <option value="Ireland">Ireland</option>
                    <option value="Japan">Japan</option>
                    <option value="The Netherlands">The Netherlands</option>
                    <option value="Scotland">Scotland</option>
                    <option value="United States">United States</option>
                </select>
            </label>
            <label id="region_select">
                <span>Region</span>
                <select name="region_select">
                    <option>-- Select --</option>
                    <option value="highland">Highland</option>
                    <option value="lowland">Lowland</option>
                    <option value="speyside">Speyside</option>
                    <option value="islay">Islay</option>
                    <option value="islands">Islands</option>
                    <option value="campbeltown">Campbeltown</option>
                    <option value="blend">Blend</option>
                </select>
            </label>
            <input type="hidden" name="region">
            <label>
                <span>Nearest Town</span>
                <input type="text" name="nearest_town">
            </label>
            <label>
                <input type="checkbox" name="cask_strength" value="true">
                <span>Cask Strength</span>
            </label>
            <label>
                <span>Age</span>
                <input type="number" name="age" placeholder="How many years has it aged in the cask">
            </label>
            <label>
                <span>Strength</span>
                <input type="number" name="strength" placeholder="Alcohol level in %">
            </label>
            <label>
                <span>Price</span>
                <input type="number" name="price" placeholder="Usually the price of a regular 700ml bottle">
            </label>
            <label>
                <span>Volume</span>
                <input type="number" name="volume" placeholder="Volume in ml of the bottle we bought">
            </label>
            <label>
                <span>URL</span>
                <input type="text" name="url" placeholder="Preferably https://www.heijdenwijnimport.nl/">
                <ul>
                    <li><a href="https://www.heijdenwijnimport.nl/" target="_blank">Van der Heijden</a></li>
                    <li><a href="https://www.topdrinks.nl/" target="_blank">Topdrinks</a></li>
                    <li><a href="https://www.drankgigant.nl/" target="_blank">Drankgigant</a></li>
                    <li><a href="https://www.gall.nl/" target="_blank">Gall & Gall</a></li>
                </ul>
            </label>
            <label>
                <span>Notes</span>
                <textarea name="notes"></textarea>
            </label>
            <h2>Tasting Notes</h2>
            <label>
                <span>Flavour</span>
                <select name="flavour" multiple>
                    <option>-- Select --</option>
                    <option value="Dark Fruit">Dark Fruit</option>
                    <option value="Floral">Floral</option>
                    <option value="Spicy">Spicy</option>
                    <option value="Cereal">Cereal</option>
                    <option value="Peaty">Peaty</option>
                    <option value="Malty">Malty</option>
                    <option value="Toffee">Toffee</option>
                    <option value="Nutty">Nutty</option>
                    <option value="Woody">Woody</option>
                    <option value="Chocolate">Chocolate</option>
                    <option value="Citrus">Citrus</option>
                </select>
            </label>
            <label>
                <span>Glance</span>
                <input type="number" name="glance" placeholder="Glance in %, 0 means watery and 100 means oily">
            </label>
            <label>
                <span>Color</span>
                <select name="color">
                    <option>-- Select --</option>
                    <option value="Clear">Clear</option>
                    <option value="White Wine">White Wine</option>
                    <option value="Straw">Straw</option>
                    <option value="Honey">Honey</option>
                    <option value="Golden">Golden</option>
                    <option value="Amber">Amber</option>
                    <option value="Copper">Copper</option>
                    <option value="Mahogany">Mahogany</option>
                    <option value="Dark Oak">Dark Oak</option>
                </select>
            </label>
            <label>
                <span>Finish</span>
                <select name="finish">
                    <option>-- Select --</option>
                    <option value="Clean">Clean</option>
                    <option value="Sweet">Sweet</option>
                    <option value="Sour">Sour</option>
                    <option value="Salty">Salty</option>
                    <option value="Bitter">Bitter</option>
                </select>
            </label>
            <label>
                <span>Rating</span>
                <input type="text" name="rating" placeholder="x out of 5">
            </label>
            <label>
                <input type="checkbox" name="would_buy" value="true">
                <span>Would Buy Again</span>
            </label>
            <button id="generate">Generate JSON</button>
        </form>
        <div class="json_output"></div>
        <div class="json_input">
    {
        "brand": "BRAND",
        "date_of_tasting": "DATE_OF_TASTING",
        "country": "COUNTRY",
        "region": "REGION",
        "nearest_town": "NEAREST_TOWN",
        "cask_strength": CASK_STRENGTH,
        "age": "AGE",
        "strength": "STRENGTH",
        "price": "PRICE",
        "volume": "VOLUME",
        "url": "URL",
        "notes": "NOTES",
        "tasting": {
            "flavour": "FLAVOUR",
            "glance": "GLANCE",
            "color": "COLOR",
            "finish": "FINISH",
            "rating": "RATING",
            "would_buy": WOULD_BUY
        }
    }
        </div>
    </body>
</html>
